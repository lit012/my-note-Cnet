### 接收返回包

> 以太网的包接收操作和发送一样，和设备类型、TCP 的工作阶段以及应用程序的种类无关，都是共通的。

在半双工模式中，一台设备发送的信号会被所有连接在同一个集线器上的设备接收。

接收到的网络包首先交给PHY（MAU）模块转换为通用格式，然后交给MAC模块。

MAC模块从起始分界符后开始将电信号转换为数字信息，当转换到FCS时，会根据包的全部内容（头部和数据块）计算出新的FCS，然后将其与包中的FCS对比，如果不一致就说明出错，丢弃包；如果一致，接下来就检查头部的MAC地址和自己的MAC地址是否一致，不一致丢弃，一致的话放在缓冲区中。

网卡接收到包后，会向扩展总线中的中断信号线发送信号，该信号通过中断控制器连接到CPU，这时CPU就会挂起正在执行的任务，转到中断处理程序。

中断处理程序调用网卡驱动程序，控制网卡执行相应的接受操作。

网卡驱动程序从缓冲区拿出网络包，根据头部的以太类型判断将包交给哪个协议栈，比如MAC类型是0080H，就将包交给TCP/IP协议栈。





